var map=new L.Map("divleaf");var Url="http://tile.openstreetmap.org/{z}/{x}/{y}.png";var myAttribution="Map data &copy; 2012 <a href='http://www.openstreetmap.org/'>OpenStreetMap</a> contributors";var myLayer=new L.TileLayer(Url,{maxZoom:18,attribution:myAttribution});var center=new L.LatLng(latCenter,longCenter);map.setView(center,zoom).addLayer(myLayer);var scale=new L.Control.Scale({position:"bottomleft",metric:true,imperial:false});scale.addTo(map);var rnnIcon=L.icon({iconUrl:"sites/all/libraries/leaflet/rnn.png",iconSize:new L.Point(22,25),iconAnchor:new L.Point(9,10),popupAnchor:new L.Point(-3,-12),});var rnrIcon=L.icon({iconUrl:"sites/all/libraries/leaflet/rnr.png",iconSize:new L.Point(22,25),iconAnchor:new L.Point(9,10),popupAnchor:new L.Point(-3,-12),});var rncIcon=L.icon({iconUrl:"sites/all/libraries/leaflet/rnc.png",iconSize:new L.Point(22,25),iconAnchor:new L.Point(9,10),popupAnchor:new L.Point(-3,-12),});var myMarkers=new Array();var mapzoom=map.getZoom();if(limit!=""){L.geoJson(limit,{style:{color:"#ff0000",weight:3,opacity:1}}).addTo(map)}len=rn_itemList.length;j=0;for(i=0;i<len;i++){if(rn_itemList[i]){rnlat=parseFloat(rn_itemList[i].latit);rnlong=parseFloat(rn_itemList[i].longi);zoom=rn_itemList[i].zoom;url=rn_itemList[i].url;type=rn_itemList[i].type;code=rn_itemList[i].code;if(mapzoom>=zoom){var markerLocation=new L.LatLng(rnlat,rnlong);if(type=="RNN"){var marker=new L.Marker(markerLocation,{icon:rnnIcon})}else{if(type=="RNR"){var marker=new L.Marker(markerLocation,{icon:rnrIcon})}else{var marker=new L.Marker(markerLocation,{icon:rncIcon})}}rnname='<a href="'+url+'"><b>'+rn_itemList[i].title+"</b></a><br><center>"+code+"<center/>";marker.bindPopup(rnname);map.addLayer(marker);myMarkers[j]=marker;j++}}}map.on("zoomstart",function(a){zoom=map.getZoom();len=myMarkers.length;for(i=0;i<len;i++){map.removeLayer(myMarkers[i])}});map.on("zoomend",function(c){mapzoom=map.getZoom();len=rn_itemList.length;j=0;for(i=0;i<len;i++){if(rn_itemList[i]){rnlat=parseFloat(rn_itemList[i].latit);rnlong=parseFloat(rn_itemList[i].longi);zoom=rn_itemList[i].zoom;url=rn_itemList[i].url;type=rn_itemList[i].type;code=rn_itemList[i].code;if(mapzoom>=zoom){var b=new L.LatLng(rnlat,rnlong);if(type=="RNN"){var a=new L.Marker(b,{icon:rnnIcon})}else{if(type=="RNR"){var a=new L.Marker(b,{icon:rnrIcon})}else{var a=new L.Marker(b,{icon:rncIcon})}}rnname='<a href="'+url+'"><b>'+rn_itemList[i].title+"</b></a><br><center>"+code+"<center/>";a.bindPopup(rnname);map.addLayer(a);myMarkers[j]=a;j++}}}});function zoomTo(a){map.setZoom(a)}function zoomIn(){map.zoomIn()}function zoomOut(){map.zoomOut()};